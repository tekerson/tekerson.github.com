
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Ubuntu resetting DNS setting (resolv.conf) - Deprecated Behaviour</title>
  <meta name="author" content="Brenton Alker">

  
  <meta name="description" content="I have been having a problem with Ubuntu since I installed it (only a few weeks ago now). Every so often, about once a day on average, my DNS &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.tekerson.com/2006/12/01/ubuntu-resetting-dns-setting-resolvconf">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/feed/atom.xml" rel="alternate" title="Deprecated Behaviour" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Share+Tech+Mono' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-2296226-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Deprecated Behaviour</a></h1>
  
    <h2>The inane, sometimes insane, ramblings from the mind of Brenton Alker.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/feed/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Ubuntu Resetting DNS Setting (resolv.conf)</h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-12-01T04:28:02+10:00" pubdate data-updated="true">Dec 1<span>st</span>, 2006</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>I have been having a problem with Ubuntu since I installed it (only a few weeks ago now). Every so often, about once a day on average, my DNS settings were being reset.</p>

<p>I had changed the settings in the &#8220;Networking&#8221; preferences interface, on numerous occasions only to discover later that the settings had been reverted. I figured it was due to the interface being set to DHCP, so I promptly changed it to a static setting (my preference in this case anyway) and thought I would be safe.</p>

<p>So I went ahead and manually added my DNS server (as described in a <a href="/archives/4">previous post</a>) to my /etc/resolv.conf</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>nameserver 192.168.1.100</span></code></pre></td></tr></table></div></figure>


<p>And went about my business. Only to discover a day later it had reverted again. It seems that even though the interface (the only one on the system) is static, that the dhcpclient still automatically reconfigures the DNS settings, to prevent this, the options are either (in order of my preference):</p>

<ol>
<li><p>Change the dhcpclient configuration &em; Simply, elegant, sweet</p></li>
<li><p>Make resolv.conf read only &em; That&#8217;ll show the sucker</p></li>
<li><p>Uninstall the dhcpclient &em; I&#8217;d prefer not to, it comes in handy if the network breaks</p></li>
</ol>


<p>So I took option one and changed the /etc/dhcp3/dhcpclient.conf adding the line:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>prepend domain-name-servers 192.168.1.100;</span></code></pre></td></tr></table></div></figure>


<p>The dhcpclient still updates my DNS settings, it&#8217;s just conveniently adds my preferred server to the top of the list. Isn&#8217;t that nice of it.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Brenton Alker</span></span>

      








  


<time datetime="2006-12-01T04:28:02+10:00" pubdate data-updated="true">Dec 1<span>st</span>, 2006</time>
      

<span class="categories">
  
    <a class='category' href='/categories/linux/'>Linux</a>, <a class='category' href='/categories/operating-systems/'>Operating Systems</a>, <a class='category' href='/categories/ubuntu/'>Ubuntu</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/2006/11/28/automatically-start-screen/" title="Previous Post: Automatically Start Screen">&laquo; Automatically Start Screen</a>
      
      
        <a class="basic-alignment right" href="/2006/12/07/using-sshfs-to-mount-remote-directories/" title="Next Post: Using SSHFS to mount remote directories">Using SSHFS to mount remote directories &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2013/05/08/php-web-services-by-lorna-mitchell/">"PHP Web Services" by Lorna Mitchell</a>
      </li>
    
      <li class="post">
        <a href="/2013/03/28/ideas-of-march-wheres-the-love/">Ideas of March: Where's the love?</a>
      </li>
    
      <li class="post">
        <a href="/2013/03/24/reboot/">Reboot</a>
      </li>
    
      <li class="post">
        <a href="/2010/02/18/the-silver-lining-of-the-readwriteweb-facebook-login-debacle/">The Silver Lining of the ReadWriteWeb/Facebook Login Debacle</a>
      </li>
    
      <li class="post">
        <a href="/2009/09/08/bootstrapping-the-doctrine2-autoloader-in-zend-framework/">Bootstrapping the Doctrine 2.0 Autoloader in Zend Framework</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $(function(){
      getTwitterFeed("tekerson", 5, true);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <p>Follow <a href="http://twitter.com/tekerson">@tekerson</a></p>
  
</section>


  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Brenton Alker -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  











</body>
</html>
